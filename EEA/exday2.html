
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Exercises Day 2 &#8212; Open Ephys EEA 2022 0.0.0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Exercises Day 3" href="exday3.html" />
    <link rel="prev" title="Exercises Day 1" href="exday1.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">Open Ephys EEA 2022</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="kitlist.html">
  NeuroKit Contents
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="eeadocsindex.html">
  EEA Course Documents
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="disclaimer_terms_conditions.html">
  Terms and Conditions
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="license.html">
  Licensing
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="acknowledgements.html">
  Acknowledgements
 </a>
</li>

    
    <li class="nav-item">
        <a class="nav-link nav-external" href="https://open-ephys.org">Open Ephys<i class="fas fa-external-link-alt"></i></a>
    </li>
    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/ahleighton/OE-ephys-course" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/openephys" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://discord.gg/vSg5UDcCwB" rel="noopener" target="_blank" title="Discord"><span><i class="fab fa-discord"></i></span>
            <label class="sr-only">Discord</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="safety.html">
   Safety &amp; Good Practices
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="software_requirements.html">
   Software Requirements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="theoryday1.html">
   Theory Day 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="theoryday2.html">
   Theory Day 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="theoryday3.html">
   Theory Day 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="theoryday4.html">
   Theory Day 4
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exday1.html">
   Exercises Day 1
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Exercises Day 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exday3.html">
   Exercises Day 3
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="exday4.html">
   Exercises Day 4
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Firmata.html">
     Firmata 2000
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="projects.html">
   Project
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exday1_nokit.html">
   Exercises Day 1: No Hardware
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="exday2_nokit.html">
   Exercises Day 2: No Hardware
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#capacitor-and-resistor-in-parallel">
   1. Capacitor and Resistor in parallel
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-equivalent-circuit-of-the-electrode">
   2. The equivalent circuit of the electrode
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#shunt-impedance">
   3.  Shunt Impedance
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#recording-circuit">
     Recording Circuit
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#operational-amplifiers">
   4. Operational Amplifiers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-recording-circuit-without-an-amplifier">
     4A. Recording circuit without an amplifier
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#b-recording-circuit-with-amplifier">
     4B. Recording circuit with amplifier
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#build-voltage-rails">
       Build voltage rails
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-bypass-capacitors">
     Add bypass capacitors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#add-a-headstage">
     Add a ‘headstage’
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/ahleighton/OE-ephys-course/edit/main/source/EEA/exday2.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="exercises-day-2">
<span id="refeday2"></span><h1>Exercises Day 2<a class="headerlink" href="#exercises-day-2" title="Permalink to this headline">#</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#capacitor-and-resistor-in-parallel" id="id1">1. Capacitor and Resistor in parallel</a></p></li>
<li><p><a class="reference internal" href="#the-equivalent-circuit-of-the-electrode" id="id2">2. The equivalent circuit of the electrode</a></p></li>
<li><p><a class="reference internal" href="#shunt-impedance" id="id3">3.  Shunt Impedance</a></p>
<ul>
<li><p><a class="reference internal" href="#recording-circuit" id="id4">Recording Circuit</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#operational-amplifiers" id="id5">4. Operational Amplifiers</a></p>
<ul>
<li><p><a class="reference internal" href="#a-recording-circuit-without-an-amplifier" id="id6">4A. Recording circuit without an amplifier</a></p></li>
<li><p><a class="reference internal" href="#b-recording-circuit-with-amplifier" id="id7">4B. Recording circuit with amplifier</a></p></li>
<li><p><a class="reference internal" href="#add-bypass-capacitors" id="id8">Add bypass capacitors</a></p></li>
<li><p><a class="reference internal" href="#add-a-headstage" id="id9">Add a ‘headstage’</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="capacitor-and-resistor-in-parallel">
<h2><a class="toc-backref" href="#id1">1. Capacitor and Resistor in parallel</a><a class="headerlink" href="#capacitor-and-resistor-in-parallel" title="Permalink to this headline">#</a></h2>
<p>In the circuit below, you will see a capacitor and a resistor in parallel. The voltage source alternates at 20Hz, going from -10 to +10 volts. The current travels over the resistor or via the capacitor to ground.</p>
<a class="reference external image-reference" href="https://www.falstad.com/circuit/circuitjs.html?ctz=CQAgjCAMB0l3BWEAmM0EE4DMGAcB2ZLMSANjABYxkQELaQKtaBTAWjDACgAnca-jSwIanGpHDxIXAMaCUCUiGE1kiqOFhTt2sO3xQt8CDF1cA7vLFX8S6Zetql1sLagXlI+SvBvulnydPUT8PH1clCgpcXzsPFz9nN2QuACVwJKU2aNiNCGQJEg0JGAQuAHNaKNzMELt3PiiYiKr6FsL4LgB7DVJ6CQpIDAMi0zUNfuVwPOUuIA"><img alt="../_images/cap_res_parallel_sim.png" class="align-center" src="../_images/cap_res_parallel_sim.png" /></a>
<div class="exercise docutils container">
<p>1A.  Increase the value of the resistor to 200kOhm. What happens to the current through the resistor?</p>
<p>1B.  Put the resistor back to 10kOhm. Now, increase the capacitance of the capacitor to around 10mF. What happens to the current?</p>
<p>1C.  Return the values to 10kOhm and 100nF.</p>
<p>Change the frequency of the alternating signal to</p>
<ul class="simple">
<li><p>1000 Hz (action potentials!)</p></li>
<li><p>then to 1 Hz</p></li>
</ul>
<p>You may have to change the simulation speed using the red slider at the top right, and adjust the x-scaling of the scope below (right-click / properties / and slide the ‘horizontal scale’).</p>
<p>How does the frequency of the signal relate to how much current crosses either the capacitor or the resistor?</p>
</div>
</section>
<section id="the-equivalent-circuit-of-the-electrode">
<h2><a class="toc-backref" href="#id2">2. The equivalent circuit of the electrode</a><a class="headerlink" href="#the-equivalent-circuit-of-the-electrode" title="Permalink to this headline">#</a></h2>
<p>In the theory handout, we discussed how we can represent an electrode as a circuit containing a resistance and a capacitance. We’ll now build this equivalent circuit in the simulator.</p>
<div class="exercise docutils container">
<p>2A. In the simulator, edit the circuit used above to build the equivalent circuit of a polarised, tungsten electrode. See the theory handout for more details.</p>
<p>Here are some values to use:</p>
<ul class="simple">
<li><p>R<sub>m</sub>: the DC resistance of the metal electrode wire, 10-100 Ohms.</p></li>
<li><p>C<sub>e</sub>: the electrode tip capacitance, generated by the double layer generated around the electrode.  C<sub>e</sub> ~ 0.2 pF / µm2, so 10 - 20 pF (if the electrode is unplated)</p></li>
<li><p>R<sub>e</sub>: electrode tip resistance, in parallel with C<sub>e</sub>. ~ 100 MOhm.</p></li>
<li><p>Edit the alternating voltage supply to provide 1V at 1Khz, mimicking the signal coming from your cell. 1V is larger than ephys signals, but makes the current flow easier to see. Change the sliders for simulation speed and current speed until you can see where the current is flowing.</p></li>
</ul>
<p>2B. What happens if you delete the resistor R<sub>e</sub>?</p>
<p>2C. Bonus exercise: Can you change this circuit from a polarising, tungsten electrode, to a circuit representing a nonpolarizable electrode?</p>
</div>
</section>
<section id="shunt-impedance">
<h2><a class="toc-backref" href="#id3">3.  Shunt Impedance</a><a class="headerlink" href="#shunt-impedance" title="Permalink to this headline">#</a></h2>
<p>Here is the circuit of the electrode with a shunt impedance added of 100 pF:</p>
<a class="reference external image-reference" href="https://www.falstad.com/circuit/circuitjs.html?ctz=CQAgjCAMB0l3BWEAmA7NVbnIBwBYFkBmMIogThxFSqTyJAQFMBaMMAKAHcQ2A2SFF7tkQyN2FhRgtlJB4q4gMaTRC3kTWLw0ZrPnQikBGBp9UqSOQQ5CUWJE48Wm+VRfSoEj0NeDxAEq8yJDaLMgIfGLg4PCM0TAI3iJCsqIs6uIATqq86j4Z2mDwJeLOroUanuIAHrw4qLwWvAiNLKh48iidAUwcdSzkneQQLHzDnZ3InQDCfQN4oS3kwnidLJFd0yAAojUALlkAhkpMADZnAK5nR1kAOgDODwCWAOYAdkdnjwAUAGpMJQASg4OXCSxkYAE0WKoJAfnAcn8sVqwnIjTwoyhVDWWx6D36jAgRCoOBxECmPQAthxXojRGByAy5CFtMp6UIUozPGBWMV7HwEAgKHwiHxcEZihR7KUnBzBKYov5CVCGOEooy2sQ8SA-s93oS2JA2mBFhp1qQMeBRDszoDDgB7AAmTEeABVngAHABcHAARnk8CbIGqpArcF4A7IsZB0mRrStxFGQsJHPCTOA-IaiB1hMgsfhJDjursDsdThdrrdHgAxK7PJ0q015iDYdLsYvbW32rLO10EgZSUPbcItrpyAAiDsufrtjwAMkcAJ5Me4PACS732q4AZic+g74uNOdhKPEYPAIIJREgiBxD2AqMfw8gzzBBa0+DhyFZUFJTKQMpwBArbgFQd5AA"><img alt="../_images/day2circuit.png" class="align-center" src="../_images/day2circuit.png" /></a>
<div class="exercise docutils container">
<p>3A. What is shunt impedance here?</p>
<p>3B. What % of our signal are we losing between Vec and Vin? Why?</p>
<p>3C. What could we change to increase the signal at Vin?</p>
<p>3D. The tips of certain electrodes, e.g. nichrome tetrodes, can be electroplated in a thin layer of gold. This ‘goldplating’ increases the surface area of the tip, creating more space to separate charge. This increases tip capacitance by around 100x. Make this change in the circuit simulator. How similar are Vec and Vin now?</p>
</div>
<section id="recording-circuit">
<h3><a class="toc-backref" href="#id4">Recording Circuit</a><a class="headerlink" href="#recording-circuit" title="Permalink to this headline">#</a></h3>
<p>To actually perform a recording, we will have to attach the electrode to the rest of an acquisition system. The recording system has an analog to digital converter (ADC), and a recording computer.  The leakage resistance here is where the recording system is connected to ground.</p>
<a class="reference external image-reference" href="https://www.falstad.com/circuit/circuitjs.html?ctz=CQAgjCAMB0l3BWcA2aAOMB2ALGXyEw1sESRMBOEJbAZmoFMBaMMAKAHcQnTtuxk3bBUEtBkTkJH9RwwbQBMUNgGMp8pU3whFUcNATMq2dAlJZaaQsgoJI9GHHZctAnZu1jlLz26a0ETTcJACVuBAog0WRsSBk9CDB4aj04mARJLWkvLOi+CQAndW4YoT9SuKT4aszPUtdRYLYADyFMCCYKei1cbgo4vgU+EIYWtrRyJB6JzAnBvgBhUdamSk1MKcCJ1aV5kABRZoAXAoBDFQYAG0uAV0vTgoAdAGdngEsAcwA7U8uXgAoAGoMFQASjYRR4kXiPGwfC8lUK3ACUW4CkwqMREhWCAwIAUm0C+Lm+OGzzG-lo9AUmgU0gJID2IQAtmwPmiMeBMKJ0UowNC0qoOaimLyueJwMwktxHKx0ZA0MhaNgFFSFFgaVBYNVnMKYQoFfFsWj1UIgmhMMjjKSQIC3l8KcIOmAELIiPwEPQ+GAlPtLiCTgB7AAmDBeABU3gAHABcbAARtw0LRnfzwpBvT7lImslNWNtcJbWA4E1aqCwsB7BKxxBSNtswLRLTxkA3lYybYcTucrrd7k9ngAxW5vYMU+X8JsyILtvZ+gMFENh8k4yDNvBxfyKyeW71KAAigZu8f9LwAMqcAJ4MAcASS+RxvADMe2NYs6KHw4eX+RA9oCjyOTIDQbRo4SNTI0E3YIIMhPB4T8KCjXACQcx9UQcGJAYIGNAIQAIcB0XwkkhhAM8GFOABrU4PmWfCpl6ARy0sDtSLPQMvg+F4ODeApRnZOJpDiGl8mUIpoIlISULgSQJPxTkEVLRR10Iag3CoXCFAmOk1PoXQ9gAQX3BYXkeU4XgWQNmSjG5HwKJTWBkS1PTidsJC4MUvEsBDa1iPSiU6QRsCQ-wlAGSAAH0YgiyKfTpNAYtgbB2hAhUkiSGI6ES+AwBiiKFAi2IItoNg-O4WYfJKV1GQmOIECi7A8riigEvqxwnDygr6pKwMUhg5qJiQdrIBw-EUh68AJn6mkWq1DMNkiEbkCIA0NjXOanHAMb3RKoA"><img alt="../_images/day2withac.png" class="align-center" src="../_images/day2withac.png" /></a>
<div class="exercise docutils container">
<p>3E. How much of the voltage at the electrode, Vec, are we recording at Vout?</p>
<p>3F. Add a headstage to this circuit, by placing an ideal operational amplifier between the electrode and the long wire. What happens to Vout? Why?</p>
<p>3G. Change the circuit to stop the amplifier from saturating. What is the amplifier gain now?</p>
</div>
</section>
</section>
<section id="operational-amplifiers">
<h2><a class="toc-backref" href="#id5">4. Operational Amplifiers</a><a class="headerlink" href="#operational-amplifiers" title="Permalink to this headline">#</a></h2>
<p>We will now build the same circuit on the breadboard. The Teensy ‘Blink’ signal will act as our neuronal data, that will travel across electrode and shunt impedances before reaching the oscilloscope to be recorded. Our goal is to get as much of the Blink signal as possible to reach our oscilloscope recording system.</p>
<p>In the theory handout, we discussed the importance of headstages. We’ll test that now, by building the recording circuit without and with an amplifier acting as a headstage.</p>
<ul class="simple">
<li><p>‘Neuron’  = Digital blink output from Teensy</p></li>
<li><p>‘Electrode’ = 100 kOhm resistor</p></li>
<li><p>‘Shunt’ = 22kOhm resistor</p></li>
<li><p>‘Leak’ = 220Ohm resistor</p></li>
<li><p>‘Recording system’ = the Picoscope</p></li>
</ul>
<a class="reference external image-reference" href="https://www.falstad.com/circuit/circuitjs.html?ctz=CQAgjCAMB0l3BWcYAs0DMAmAnGBkEUUAOdPdEFANhCX1oFMBaMMAKAEMRttNKtwmMDRQDi4JCyRh48KNATZ8AdiqRhKBDnwUYi-MTDYqyoWVTiZstgHduvSsPt90WqLechXfMEJrf3O18nAOCRAUg2ACdBYkgQKhRY+LBVKBBMTEiAcxBiY1o1PIK1cXjImPyREmKaBCL4zPgPKsoanj4iMui8uDbxVq70q2aAJV74oeV0arKM+SR0DHTyhQ8w-h8ccL5I8eViJMSQU3jjxoWvZfKFnoOjpOI4hKSU2Ui7J7Ok7DTznq+Lzyz1SNEaWTgbFyMie4DSMPEmVegWQkAeySBHwxxzAM2+7mhflo8KJpRWPQ2oi2TgQaXBWN+NBxMnRWMBoPAkFhHKxCLhNF8ILpbAAHpz0MoMpZhIsIElMEkAHIAewAOgBnDgAWwADgAbACWADMDQwoqLOSgIFgkqx0EksJL5UkAIK6w0ms0W5S4LzxfIuCjOkAAUT1DAAxgAXKLKgAmDG9Psc-ueVqDGSSYcjMfjibFVBM4DECGkrkomZAAGUABYAVwAdlGNQBJXUMOMcBsR-MJYiSrR8ft0TBIYO1xvN9VtnUdrs9i24hWCSXCLnFyaVgAyDA4AGsNQb253uwwNVG1ersrHG3HF6OKAhUBIJbRUhXlzv94fj-Oz+qLw1a9lVvNhlW4TllxSTJsHEJZdFgOAIAubAvDAzlIORXwcDKBQlEgVR1ESLR8IQ+AIAgHx4nQdCnBkKDBBw+Q4GUVIFSUUsUEwdBiBwV5EPUeYfH8WjV0gBjsNg5iCLYlAOMIbjeOwfjyK8eZ3xooA"><img alt="../_images/circuitday2.png" class="align-center" src="../_images/circuitday2.png" /></a>
<section id="a-recording-circuit-without-an-amplifier">
<h3><a class="toc-backref" href="#id6">4A. Recording circuit without an amplifier</a><a class="headerlink" href="#a-recording-circuit-without-an-amplifier" title="Permalink to this headline">#</a></h3>
<div class="exercise docutils container">
<p>4A.   Upload the Blink example to your teensy (File/Examples/Basics/Blink)(or just run it if still loaded).</p>
<p>Build the circuit below:</p>
<ul class="simple">
<li><p>Send the Teensy output through a 100 KOhm resistor. This makes it behave a bit like a biological signal coming from an electrode.</p></li>
<li><p>A 22kOhm resistor to ground simulates shunt impedance.</p></li>
<li><p>A 220 Ohm resistor to ground simulates that your acquisition system is connected to ground (via some resistance).</p></li>
<li><p>The yellow wires are ‘readout’ wires to connect your oscilloscope to.</p></li>
</ul>
<img alt="../_images/resistors_amplifier_breadboard.png" class="align-center" src="../_images/resistors_amplifier_breadboard.png" />
<img alt="../_images/fritz_wire_only_blink.png" class="align-center" src="../_images/fritz_wire_only_blink.png" />
<img alt="../_images/wire_only_blink.png" class="align-center" src="../_images/wire_only_blink.png" />
<p>4B.   Use the oscilloscope to measure the peak to peak voltage amplitude recorded at three points:</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>(+) Probe Location</p></th>
<th class="head"><p>Circuit 1, without amplifier</p></th>
<th class="head"><p>Circuit 2, with amplifier</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><ol class="arabic simple">
<li><p>Teensy Pin 13</p></li>
</ol>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><ol class="arabic simple" start="2">
<li><p>Readout Wire 1</p></li>
</ol>
</td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><ol class="arabic simple" start="3">
<li><p>Readout Wire 2</p></li>
</ol>
</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>4C. How much signal is lost?</p>
</div>
</section>
<section id="b-recording-circuit-with-amplifier">
<h3><a class="toc-backref" href="#id7">4B. Recording circuit with amplifier</a><a class="headerlink" href="#b-recording-circuit-with-amplifier" title="Permalink to this headline">#</a></h3>
<section id="build-voltage-rails">
<h4>Build voltage rails<a class="headerlink" href="#build-voltage-rails" title="Permalink to this headline">#</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure that the pins from the batteries do not touch, and if they’re not in use, best to put some tape on them so they don’t touch things. ‘Short-circuiting’ the batteries (connecting them without any sort of resistance) causes a huge current to flow from the + to -, enough to… melt stuff.</p>
</div>
<p>We need to provide our op-amp with power. We will use batteries to make voltage ‘rails’. We are going to make a -3V and +3V rail. To do this we use a common trick and turn two regular power supplies into a bipolar power supply. In our case we use batteries, because they’re cheap and pretty much fully noise-free. Check which way up your breadboard is (keep the blue line at the top). Following the figures precisely will make debugging much easier later on.</p>
<div class="exercise docutils container">
<p>4D. Connect the battery holders as follows:</p>
<ul class="simple">
<li><p>The first pair of batteries provides +3V from the red wire (goes to red rail on breadboard), and 0 from the black wire (goes to blue rail on breadboard).</p></li>
<li><p>The two blue rails of the breadboard are connected through a wire, setting them both to 0V.</p></li>
<li><p>The second pair of batteries is reversed (red wire goes to blue rail, black wire to red rail). This provides -3V relative to ground.</p></li>
<li><p>Remember or label which side is +3 and which is -3</p></li>
</ul>
<img alt="../_images/bipolar_power_supply.png" class="align-center" src="../_images/bipolar_power_supply.png" />
<img alt="../_images/fritz_bipolar_power_supply.png" class="align-center" src="../_images/fritz_bipolar_power_supply.png" />
</div>
</section>
</section>
<section id="add-bypass-capacitors">
<h3><a class="toc-backref" href="#id8">Add bypass capacitors</a><a class="headerlink" href="#add-bypass-capacitors" title="Permalink to this headline">#</a></h3>
<p>Bypass capacitors are small capacitors that act like little secondary batteries. The batteries we use have a high ESR - ‘equivalent series resistance’, and some capacitance. This means that are not great at quickly providing current. Because of this, when our op-amp starts working, it can run out of current for a very short time until the battery can drive the rails back to their original voltage. This is bad for the signal quality.</p>
<p>So, we allow these small capacitors to charge. If the battery briefly can’t provide current, the bypass capacitors will discharge, providing quick back-up current. We’re exploiting the fact that these caps have very low ESR and can provide current pretty much instantaneously. The fact that they’re too small to power anything for more than a millisecond does not matter here, at that point the batteries have caught up.</p>
<div class="exercise docutils container">
<p>4E. Add two 100nF (marked 104) caps, one to each rail, so connecting GND to 3V and connecting GND to -3V.</p>
<img alt="../_images/fritz_bipolar_power_supply.png" class="align-center" src="../_images/fritz_bipolar_power_supply.png" />
</div>
</section>
<section id="add-a-headstage">
<h3><a class="toc-backref" href="#id9">Add a ‘headstage’</a><a class="headerlink" href="#add-a-headstage" title="Permalink to this headline">#</a></h3>
<p>We will replace our long wire with a ‘headstage’. We will use only the most basic part of the headstage, an operational amplifier.</p>
<p>This is the op-amp you have.  Make sure you’re looking at the op-amp (AS358P), not the instrumentation amp.</p>
<img alt="../_images/op_amp_pinout.png" class="align-center" src="../_images/op_amp_pinout.png" />
<div class="exercise docutils container">
<p>4F. Add the op-amp to the circuit.</p>
<ul class="simple">
<li><p>Place the op-amp on your breadboard, with the semicircle cutout on the left.</p></li>
<li><p>Connect the +3 voltage rail to ‘Vcc+’ and the -3 voltage rail to ‘Vcc-‘</p></li>
<li><p>Put the electrode output wire into the + input of your op-amp, and the output of the op-amp into the ‘wire’ simulation circuit.</p></li>
<li><p>Feed the output of the op-amp, back into the – input.</p></li>
</ul>
<p>4G. Now measure the same three points as before and complete the table in question 4B.         -</p>
<p>4H. Optional: try changing the resistances you’ve used for electrode, shunt, and leakage. What happens to the signal?</p>
<p>4I. Optional: Measure the same points in the simulator as you did on the breadboard. How do they compare?</p>
<img alt="../_images/fritz_headstage_blink.png" class="align-center" src="../_images/fritz_headstage_blink.png" />
<img alt="../_images/amp_headstage_blink.png" class="align-center" src="../_images/amp_headstage_blink.png" />
</div>
</section>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="exday1.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Exercises Day 1</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="exday3.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Exercises Day 3</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2010-2022, Open Ephys, OEPS &amp; Contributors.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>